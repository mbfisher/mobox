<html ng-app="mopidyWebClient">
  <head>
    <script type="text/javascript" src="/mopidy/mopidy.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
    <script type="text/javascript" src="/js/client.js"></script>
    <script type="text/javascript" src="/js/services.js"></script>
    <script type="text/javascript" src="/js/controllers/playbackController.js"></script>
    <script type="text/javascript" src="/js/controllers/playlistController.js"></script>
    <script type="text/javascript" src="/js/controllers/searchController.js"></script>
    <script type="text/javascript" src="/js/controllers/libraryController.js"></script>

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet/less" href="/css/app.less">

    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.3.3/less.min.js"></script>
  </head>
  <body>
    <div id="top-bar" class="border">
    <h1>mobox</h1>
    </div><!-- /#top-bar -->

    <div id="left-col" class="main-col border">

    <div id="library" ng-controller="libraryController">
      <ul>
        <li ng-repeat="playlist in playlists"><a ng-click="showPlaylist(playlist)">{{ playlist.name }}</a></li>
      </ul>
    </div><!-- /#playlists -->


    </div><!-- /#left-col -->

    <div id="centre-col" class="main-col border">

    <div id="playlist" ng-controller="playlistController">
      <table>
        <tbody>
          <tr class="track" ng-repeat="(i, track) in tracklist" ng-click="addToPlaylist(track)">
            <td class="track-name">{{ track.name }}</td>
            <td class="track-artist">{{ track.artists[0].name }}</td>
            <td class="track-album">{{ track.album.name }}</td>
          </tr>
        </tbody>
      </table>
    </div><!-- /#playlist -->

    </div><!-- /#centre-col -->

    <div id="right-col" class="main-col border">

    <div id="search" ng-controller="searchController">
      <form ng-submit="search()">
        <input name="query" ng-model="query">
        <input type="submit" value="Search">
      </form>
      <div class="column">
      <h2>Artists</h2>
      <ul>
        <li ng-repeat="artist in result.artists.slice(0, 10)"><a ng-click="setTracklistArtist(artist.name)">{{ artist.name }}</a></li>
      </ul>
      </div><!-- /.column -->
      <div class="column">
      <h2>Albums</h2>
      <ul>
        <li ng-repeat="album in result.albums.slice(0, 10)"><a ng-click="setTracklistAlbum(album.uri)">{{ album.name }} -- {{ album.artists[0].name }}</a></li>
      </ul>
      </div><!-- /.column -->
    </div><!-- /#search -->

    </div><!-- /#right-col -->

    <div id="bottom-bar" class="border">
    <div id="playback" ng-controller="playbackController">
      <ul id="controls">
        <li><a class="playback-control" id="stop" ng-click="stop()" ng-hide="state == 'stopped'"></a></li>
        <li><a class="playback-control"id="play" ng-click="play()" ng-hide="state == 'playing'"></a></li>
        <li><a class="playback-control"id="pause" ng-click="pause()" ng-show="state == 'playing'"></a></li>
        <li><a class="playback-control"id="previous" ng-click="previous()"></a></li>
        <li><a class="playback-control"id="next" ng-click="next()"></a></li>
      </ul>
      <div id="progress">
        <div id="progress-outer">
          <div id="progress-inner" style="width: {{progressPercentage()}}%"></div>
        </div>
        {{ currentProgress }} / {{ progressToTime(currentTrack.length) }}
      </div>
      <div id="now-playing">
        <div id="now-playing-info">
        <p id="now-playing-track">{{ currentTrack.name }}</p>
        <p id="now-playing-artist">{{ currentTrack.artists[0].name }}</p>
        <p id="now-playing-album">{{ currentTrack.album.name }}</p>
        <p><a ng-click="showTracklist()">Show tracklist</a></p>
        </div>
        <div id="now-playing-artwork">Art</div>
        <div class="clear-both"></div>
      </div>
    </div><!-- /#playback -->
    </div><!-- /#bottom-bar -->
  </body>
</html

